<html>
<head>
	<title>Services</title>
	<link href = "../assets/img/logo.png" rel="icon">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
	<!-- Bootstrap and JQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">

	<!--Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

	<!--CUSTOM CSS -->
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css">
</head>

<body>
<!------------------ HEADER ------------------>
	<header class="mb-4">
		<div class="container-fluid fixed-top" style="padding:0; background-color:#FEFAFA">
			<div class="col text-center" id="fadeout">
				<img class="img-fluid" src="../assets/img/logo2.png" style="max-height:120px" />
			</div>
			<nav class="navbar navbar-expand-lg" style="margin:0">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="margin:auto">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
					<ul class="navbar-nav" style="margin:auto">
						<li class="nav-item"><a class="nav-link navigation-text" href="../index.html">Home</a></li>
						<li class="nav-item"><a class="nav-link navigation-text" href="whoweare.html">Who We Are</a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Our offer
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="services.html">Services</a>
								<a class="dropdown-item navigation-text" href="people.html">People</a>
								<a class="dropdown-item navigation-text" href="locations.html">Locations</a>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								News &amp; Events
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="#">News</a>
								<a class="dropdown-item navigation-text" href="#">Events</a>
							</div>
						</li>
						<li class="nav-item"> <a class="nav-link navigation-text" href="contactus.html">Contacts</a> </li>
					</ul>
				</div>
			</nav>
		</div>
	</header>

	<div class="container-fluid" id="content-wrapper">
		<!----- CONTENT ---->

		<!-- PRESENTATION IMAGE -->
		<div  class="row">
			<div class ="col-lg-8 col-xxs-12 m-auto text-center">
				<img src="../assets/img/presentation_img/services.jpg" class="presentation-image" alt="Assisting">
				<div class="opaque_line_text">
					our services
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-10 m-auto">
				<p>For children with disabilities, having the right support can be so important for their learning and development – and at House with No Steps we’re here every step of the way. From early childhood to the teenage years, our services can help your your child to be more independent, adapt to their environment, and help them prepare for child care, kindergarten, or school.
					The goal is to ensure disabled children have the same opportunities in life as their non-disabled peers. Our community-based services do just that. They support children to make and meet friends, connect with their communities and enjoy new opportunities and experiences.
					We encourage children to be ambitious about what they want to do and work with them to make their wishes a reality. The approach is about being inclusive, flexible and, above all, fun. If you have a Direct Payment or Personal Budget we can offer you services tailored to your individual needs.</p>
			</div>
		</div>
		<div class="row mt-5">

			<div class="d-flex flex-row justify-content-around flex-wrap m-auto" id="buttonContainer" style="width: 50%">
				<span id="onClickReturn"> </span>
				<button class="filter_button m-4 p-2" id="allBtn" onClick="showEverything()">All Regions</button>
				<!--filled with other buttons-->
			</div>
			
			
			<!-----SERVICES CATEGORY----->
			<div class="col-lg-10 m-auto" id="servicesGroup">

				<!--Advisory-->
				<div class="serviceContainer" id="Advisory">
					<div class="pl-3 mt-3" style="border-left: 15px solid blue" id="AdvisoryDescription">
						<h2>Advisory</h2>
						<img class="rounded_icon" src="../assets/img/icons/book.png">
						<p>The goal of an advisory is to help students figure out who they are, where they’re headed, and how they’re going to get there. Through an advisory system, each student has an adult who knows them and helps them navigate high school so that they leave with a meaningful, personalized plan and are prepared for postsecondary options.</p>
					</div>

					<ul class="stylish-list pl-5" id="AdvisoryList">
						<!---fill with services--->
					</ul>
				</div>

				<!--CHILDREN-->
				<div class="serviceContainer" id="Children">
					<div class="pl-3 mt-5" style="border-left: 15px solid green" id="ChildrenDescription">
						<h2>Children</h2>
						<img class="rounded_icon" src="../assets/img/icons/child.png">
						<p>Children are the ones who are very vital for deciding how the world is gonna be after some years. So if one can do some good in the life of a child then there can be change, atleast a slightest change, in the world to come. And if most of them think on same lines then we can hope of a better future ahead. The main component which decides how the person is going to be in the future or the present is the amount of education he/she has within them.</p>					
					</div>
					
					<ul class="stylish-list pl-5" id="ChildrenList">
						<!---fill with services--->
					</ul>
				</div>
				

				<!--YOUNG ADULTS-->
				<div class="serviceContainer" id="YoungAdults">
					<div class="pl-3 mt-5" style="border-left: 15px solid red" id="YoungAdultsDescription">
						<h2>Young Adults</h2>
						<img class="rounded_icon" src="../assets/img/icons/young_adult.png">
						<p>Growing up, we learn to resent being told what to do. It’s almost instinctive. If it’s not our parents, it’s our teachers, if it’s not our teachers it’s that ever present “society” that tells us we aren’t old enough to make decisions for ourselves so we’re to follow their rules until we’re old enough to “know better”.</p>
					</div>

					<ul class="stylish-list pl-5" id="YoungAdultsList">
						<!---fill with services--->
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!------------------ FOOTER ------------------>
	<footer>
		<div class="footer_content">
			<div class="container-fluid">
				<div class="row">
				    <div class="col-md-6 col-xs-10 d-flex flex-column flex-md-row text-center align-items-center nav-itemfooter mb-3" >
						 <a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Home</a>
						 <a style="color: white; padding-left: 10px; padding-right: 10px" href="../index.html">Privacy</a>
						 <a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Volunteer</a>
						 <a style="color: white; padding-left: 10px; padding-right: 10px" href="#">FAQ</a>
						 <a style="color: white; border-right: none; padding-left: 10px; padding-right: 10px" href="#">Help Us!</a>
					</div>
					<div class="col-md-4 col-xs-10 mb-3" >
						<div class ="social">
							<div class="a2a_kit a2a_kit_size_32 a2a_default_style d-flex justify-content-center" style="padding-top: 10px">
								<a class="a2a_button_facebook" href="https://www.facebook.com"></a>
								<a class="a2a_button_twitter" href="https://www.twitter.com" style="margin-left: 10px"></a>
								<a class="a2a_button_google_plus" href="https://www.plus.google.com" style="margin-left: 10px"></a>
								<a class="a2a_button_email" style="margin-left: 10px"></a>
							</div>
							<script async src="https://static.addtoany.com/menu/page.js"></script>
						</div>
					</div>
					<div class="col-md-2 col-xs-10">
						<button href="#" type="button" class="btn donate-btn d-block mx-auto mb-3">
							donate
						</button>
					</div>
				</div>
			</div>
		</div>
	</footer>
    
    
	<!---------------------------------------------------->
	<!------------------ DYNAMIC SCRIPT ------------------>
	<!---------------------------------------------------->
	
	<script src="../assets/js/script.js"></script>
	<script type="text/javascript">
		
		'use strict'; 
		
		jQuery(document).ready(function(){
      	      
			/**First of all a List of all the typologies of services is created, in order to fill the correct area with the correct service
			 * In order to match the filtering buttons, for every service, a list of operating locations is fetched and added as attribute
			 * With the updated service every typology <div> is filled with service's overview
			 */
			fetch('/services')
				.then(response => response.json())
				.then(function(serviceList){
					
					let typoList = serviceList
											.map(serv => serv.typology) //extract only typology
											.filter((elem, index, self) => index == self.indexOf(elem)) //delete duplicates
											.map(type => type.replace(/\s+/g, '')); //delete spaces
				
					
					serviceList.forEach(function(service){
						fetch('/services/' + service.id + '/locations/basic-info')
							.then(secondResponse => secondResponse.json())
							.then(function(servLocationList){
								let locList = servLocationList
														.map(loc => loc.name); //extract name from location

								service.regionList = locList;
							
								addOverview(service, typoList);
						});
					});
			});
			
			fetch('/locations/basic-info')
				.then(response => response.json())
				.then(function(locationList){
					let regionList = locationList
												.map(loc => loc.name); //extract only name

					addFilterButtons(regionList);					
			});
		
		
         function addFilterButtons(regionList){
				regionList.forEach(function(reg){
					$('#buttonContainer').append(`
						<button class="filter_button m-4 p-2" id="${reg}" onClick="filterList(this.id)">${reg}</button>
					`);
				});
			};
			
			
			function addOverview(service, typoList){
				typoList.forEach(function(type){					
					//spaces are deleted from input service typology in order to match with div Id, which has no spaces
					var typeName_NoSpaces = service.typology.replace(/\s+/g, ''); //delete spaces
					if(typeName_NoSpaces === type)
						$('#' + type + 'List').append(`
							<li class="my-2 serviceOverview">
								<span class="sr-only">${service.regionList}</span>
								<a class="d-block" data-toggle="collapse" href="#collapseService_${service.id}" role="button" aria-expanded="false">
									${service.name}
								</a>
								<div class="collapse" id="collapseService_${service.id}">
									<div class="p-1">
										${service.overview.split(".")[0] + "." + service.overview.split(".")[1] + "..."}
										<a href="serviceDetail.html?id=${service.id}" class="button redirect-btn ml-auto mr-3 my-1">Read More...</a>
									</div>
								</div>
							</li>
						`);
				});
			};
			
		});
		
		/**Filter is done by the match between button name, and a string, placed in a 'sr-only' span.
		 * String is splitted in an array of locations
		 * If the button Name appears in the Array, the overview is showed; in the other case, it's hided.
		 *
		 * If a category <div> remains without 'visible' overviews, it's also hided.
		 */
		function filterList(btnName){
			$('li.serviceOverview').each(function(){
				let elem = this; //jQuery object containing the single <li>
				var srOnly_text = $(elem).find('span.sr-only').text();
				var locations = srOnly_text.split(',');
				if($.inArray(btnName, locations) > -1)
					$(elem).show();
				else
					$(elem).hide();
			});
			
			$('.serviceContainer ul.stylish-list').each(function(){
				let elem = this;
				
				$(elem).parent().show()
				if( $(elem).children(':visible').length == 0 )
					$(elem).parent().hide()
			});
			
			scrollOnClick();
		};
		
		function showEverything(){
			$('.serviceContainer').show();

			$('li.serviceOverview').each(function(){
				$(this).show();
			});
			
			scrollOnClick();
		}
            
    </script>
    
</body>
</html>
