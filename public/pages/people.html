<!DOCTYPE html>
<html>
<head>
	<title>People</title>
	<link href = "../assets/img/logo.png" rel="icon">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
	<!-- Bootstrap and JQuery -->
	<script src="https://code.jquery.com/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">

	<!--Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

	<!--CUSTOM CSS-->
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css">
</head>

<body>
	<!------------------ HEADER ------------------>
	<header class="mb-4">
		<div class="container-fluid fixed-top" style="padding:0; background-color:#FEFAFA">
			<div class="col text-center" id="fadeout">
				<img class="img-fluid" src="../assets/img/logo2.png" style="max-height:120px" />
			</div>
			<nav class="navbar navbar-expand-lg" style="margin:0">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="margin:auto">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
					<ul class="navbar-nav" style="margin:auto">
						<li class="nav-item"><a class="nav-link navigation-text" href="../index.html">Home</a></li>
						<li class="nav-item"><a class="nav-link navigation-text" href="whoweare.html">Who We Are</a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Our offer
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="services.html">Services</a>
								<a class="dropdown-item navigation-text" href="people.html">People</a>
								<a class="dropdown-item navigation-text" href="locations.html">Locations</a>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								News &amp; Events
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="#">News</a>
								<a class="dropdown-item navigation-text" href="#">Events</a>
							</div>
						</li>
						<li class="nav-item"> <a class="nav-link navigation-text" href="contactus.html">Contacts</a> </li>
					</ul>
				</div>
			</nav>
		</div>
	</header>
  	
	<!------------------ PRESENTATION IMAGE ------------------>
	<div class="container-fluid" id="content-wrapper">
		<div  class="row">
			<div class="col-lg-8 col-xxs-12 m-auto text-center">
				<img src="../assets/img/presentation_img/people.jpg" class = "presentation-image" alt="The team">
				<div class="opaque_line_text">
					People
				</div>
			</div>
		</div>

		<!------------------ DESCRIPTION CONTENT ------------------>
		<div class="row">
			<div class="col-lg-8 text-center m-auto">
				<p>We work with children who have moderate to severe learning and physical disabilities and sensory impairments â€“ typically autism, cerebral palsy and muscular dystrophy. We also encounter rare syndromes and conditions.Referral into the Children with Disabilities Social Work Team comes via the Safeguarding Referral Team (SRT)  and provides a Children and Families Assessment which may lead to the provision of an allocated Social Worker or Social Work Assistant who will draw up a Child In Need Plan to offer Focused and/or Enhanced Social Care Services. These services are coordinated in order to support Stoke on Trent's vision for children and young people as set out in the Children &amp; Young People's Plan is for them</p>
				
				<h2>Meet us!</h2>
				<p>Here you shall find everything you need to know about our past experiences and our areas of expertise. Find out if we work in the facility you're interested in!</p>
			</div>
		</div>

		<!------------ FILTERING BUTTONS  ------------>
		<div class="d-flex flex-row justify-content-around flex-wrap m-auto" id="buttonContainer" style="width: 50%">
			<button class="filter_button m-4 p-2" id="allBtn" onClick="showAll()">All People</button>
		</div>

		<!------------ DOCTOR CARDS  ------------>
		<div class="container mt-5" id="onClickReturn">
			<div class="d-flex flex-row flex-wrap justify-content-around" id="card_container">
				<!--filled with cards-->
			</div>
		</div>
	</div>

	<!------------------ FOOTER ------------------>

	<footer>
		<div class="footer_content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-10 col-md-6 d-flex flex-column flex-md-row text-center align-items-center nav-itemfooter mx-auto mb-3" >
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="../index.html">Home</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Privacy</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Volunteer</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">FAQ</a>
						<a style="color: white; border-right: none; padding-left: 10px; padding-right: 10px" href="#">Help Us!</a>
					</div>
					<div class="col-10 col-md-4 mx-auto mb-3">
						<div class ="social">
							<div class="a2a_kit a2a_kit_size_32 a2a_default_style d-flex justify-content-center" style="padding-top: 10px">
								<a class="a2a_button_facebook" href="https://www.facebook.com"></a>
								<a class="a2a_button_twitter" href="https://www.twitter.com" style="margin-left: 10px"></a>
								<a class="a2a_button_google_plus" href="https://www.plus.google.com" style="margin-left: 10px"></a>
								<a class="a2a_button_email" style="margin-left: 10px"></a>
							</div>
							<script async src="https://static.addtoany.com/menu/page.js"></script>
						</div>
					</div>
					<div class=" col-10 col-md-2 mx-auto">
						<button href="#" type="button" class="btn donate-btn d-block mx-auto mb-3">
							donate
						</button>
					</div>
				</div>
			</div>
		</div>
	</footer>
	
	
	<!---------------------------------------------------->
	<!------------------ DYNAMIC SCRIPT ------------------>
	<!---------------------------------------------------->
	
	<script src="../assets/js/script.js"></script>
	<script type="text/javascript">
		
		'use strict';
		
		jQuery(document).ready(function() {
			
			fetch('/people/basic-info')
				.then(response => response.json())
				.then(function(doctors){
					doctors.forEach(function(doc){
						fetch('/people/' + doc.id + '/services/typology')
							.then(secondResponse => secondResponse.json())
							.then(function(typoList) {
								doc.typoString = typoList
															.map(elem => elem.typology) //extract only typology
															.map(type => type.replace(/\s+/g, '')) //delete spaces
															.join(','); //create String from Array
								addDoctorCard(doc);
							});
					});
			});
			
			fetch('/services/basic-info')
				.then(response => response.json())
				.then(function(serviceList){
					let typoList = serviceList
											.map(serv => serv.typology) //extract only typology
											.filter((elem, index, self) => index == self.indexOf(elem)) //delete duplicates
					addFilterButtons(typoList);
			});
			
			
			function addFilterButtons(typologyList){
				typologyList.forEach(function(type){
					var type_NoSpaces = type.replace(/\s+/g, '');
					$('#buttonContainer').append(`
						<button class="filter_button m-4 p-2" id="${type_NoSpaces}" onClick="filterCards(this.id)">${type}</button>
					`);
				});
			};
			
			
			function addDoctorCard(doctor){
				$('#card_container').append(`
					<div class="doctor-card m-3 text-center">
						<p class="sr-only">${doctor.typoString}</p>
						<a href="personDetail.html?id=${doctor.id}">
							<div class="card-link">
								<div class="card-img-container">
									<img class="img-fluid card-img" src="${doctor.picture}" alt="doctor_image">
									<div class="lens_img"></div>
								</div>
								<h3 class="mt-2">${doctor.name} ${doctor.surname}</h3>
							</div>
						</a>
						<a class="btn d-md-none btn-sm btn-outline-secondary float-right mb-2" href="personDetail.html?id=${doctor.id}">See More...</a>
					</div>
				`);
			};
			
		});
		
		/*---------------*/
		
		/**Filter is done by the match between button name, and a string, placed in a 'sr-only' span.
		 * String is splitted in an array of services
		 * If the button Name appears in the Array, the card is showed; in the other case, it's hided.
		 */
		function filterCards(btnName){
			$('.doctor-card').each(function(){
				let card = this; //jQuery object containing the single doctor-card's <div>
				var srOnly_text = $(card).find('p').text();
				var services = srOnly_text.split(',');
				if($.inArray(btnName, services) > -1)
					$(card).show();
				else
					$(card).hide();
			});
			scrollOnClick();
		};
		
	</script>
	
	
</body>
</html>
