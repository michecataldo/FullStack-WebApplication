<!DOCTYPE html>
<html>
<head>
	<title>Profile</title>
	<link href = "../assets/img/logo.png" rel="icon">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
	<!-- Bootstrap and JQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">

	<!--Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

	<!--CUSTOM CSS-->
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css">
</head>

<body>
	<!------------------ HEADER ------------------>
	<header class="mb-4">
		<div class="container-fluid fixed-top" style="padding:0; background-color:#FEFAFA">
			<div class="col text-center" id="fadeout">
				<img class="img-fluid" src="../assets/img/logo2.png" style="max-height:120px" />
			</div>
			<nav class="navbar navbar-expand-lg" style="margin:0">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="margin:auto">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
					<ul class="navbar-nav" style="margin:auto">
						<li class="nav-item"><a class="nav-link navigation-text" href="../index.html">Home</a></li>
						<li class="nav-item"><a class="nav-link navigation-text" href="whoweare.html">Who We Are</a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Our offer
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="services.html">Services</a>
								<a class="dropdown-item navigation-text" href="people.html">People</a>
								<a class="dropdown-item navigation-text" href="locations.html">Locations</a>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								News &amp; Events
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="#">News</a>
								<a class="dropdown-item navigation-text" href="#">Events</a>
							</div>
						</li>
						<li class="nav-item"><a class="nav-link navigation-text" href="contactus.html">Contacts</a></li>
					</ul>
				</div>
			</nav>
		</div>
	</header>
	<nav aria-label="breadcrumb">
	  <ol class="breadcrumb">
	    <li class="breadcrumb-item"><a href="people.html">People</a></li>
	    <li class="breadcrumb-item active" aria-current="page" id="breadcrumbName"><!--fill with name--></li>
	  </ol>
	</nav>

	<!------------------ CONTENT ------------------>

	<div class="container-fluid" id="content-wrapper">
		
		<!---COVER IMAGE--->
		<div class="row">
        <div class="title text-center" id="docName">
          <!--fill with name-->
        </div>
      </div>

		<!---PROFILE--->
		<div class="row mt-3">
			<div class="col-md-3 ml-auto mt-0 mt-md-5">
				<img src="#" class="card-img" id="docImg">
			</div>
			<div class="col-md-7 mr-auto mt-xs-5">
				<h3 class="text-center text-md-left mt-4 mt-md-0"style="color: rgba(226,162,30,0.8)" id="docProfession"> <!--filled with Profession--> </h3>
				<!---Doc description--->

				<blockquote class="doctor_quote float-right" id="doctorQuote">
					<!--fill with quote-->
				</blockquote>
			</div>
		</div>

		<hr class="division_line order-3 my-5">


		<!-----SERVICES CATEGORY----->
			<div class="col-lg-10 m-auto" id="servicesGroup">

				<!--Advisory-->
				<div class="serviceContainer d-none" id="Advisory">
					<div class="pl-3 mt-3" style="border-left: 15px solid blue" id="AdvisoryDescription">
						<h2>Advisory</h2>
						<img class="rounded_icon" src="../assets/img/icons/book.png">
						<p>The goal of an advisory is to help students figure out who they are, where they’re headed, and how they’re going to get there. Through an advisory system, each student has an adult who knows them and helps them navigate high school so that they leave with a meaningful, personalized plan and are prepared for postsecondary options.</p>
					</div>

					<ul class="stylish-list pl-5" id="AdvisoryList">
						<!---fill with services--->
					</ul>
				</div>

				<!--CHILDREN-->
				<div class="serviceContainer d-none" id="Children">
					<div class="pl-3 mt-5" style="border-left: 15px solid green" id="ChildrenDescription">
						<h2>Children</h2>
						<img class="rounded_icon" src="../assets/img/icons/child.png">
						<p>Children are the ones who are very vital for deciding how the world is gonna be after some years. So if one can do some good in the life of a child then there can be change, atleast a slightest change, in the world to come. And if most of them think on same lines then we can hope of a better future ahead. The main component which decides how the person is going to be in the future or the present is the amount of education he/she has within them.</p>					
					</div>
					
					<ul class="stylish-list pl-5" id="ChildrenList">
						<!---fill with services--->
					</ul>
				</div>
				

				<!--YOUNG ADULTS-->
				<div class="serviceContainer d-none" id="YoungAdults">
					<div class="pl-3 mt-5" style="border-left: 15px solid red" id="YoungAdultsDescription">
						<h2>Young Adults</h2>
						<img class="rounded_icon" src="../assets/img/icons/young_adult.png">
						<p>Growing up, we learn to resent being told what to do. It’s almost instinctive. If it’s not our parents, it’s our teachers, if it’s not our teachers it’s that ever present “society” that tells us we aren’t old enough to make decisions for ourselves so we’re to follow their rules until we’re old enough to “know better”.</p>
					</div>

					<ul class="stylish-list pl-5" id="YoungAdultsList">
						<!---fill with services--->
					</ul>
				</div>
			</div>
	</div>


	<!------------------ FOOTER ------------------>

	<footer>
		<div class="footer_content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-10 col-md-6 d-flex flex-column flex-md-row text-center align-items-center nav-itemfooter mx-auto mb-3" >
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="../index.html">Home</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Privacy</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Volunteer</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">FAQ</a>
						<a style="color: white; border-right: none; padding-left: 10px; padding-right: 10px" href="#">Help Us!</a>
					</div>
					<div class="col-10 col-md-4 mx-auto mb-3">
						<div class ="social">
							<div class="a2a_kit a2a_kit_size_32 a2a_default_style d-flex justify-content-center" style="padding-top: 10px">
								<a class="a2a_button_facebook" href="https://www.facebook.com"></a>
								<a class="a2a_button_twitter" href="https://www.twitter.com" style="margin-left: 10px"></a>
								<a class="a2a_button_google_plus" href="https://www.plus.google.com" style="margin-left: 10px"></a>
								<a class="a2a_button_email" style="margin-left: 10px"></a>
							</div>
							<script async src="https://static.addtoany.com/menu/page.js"></script>
						</div>
					</div>
					<div class=" col-10 col-md-2 mx-auto">
						<button href="#" type="button" class="btn donate-btn d-block mx-auto mb-3">
							donate
						</button>
					</div>
				</div>
			</div>
		</div>
	</footer>
	
	
	<!---------------------------------------------------->
	<!------------------ DYNAMIC SCRIPT ------------------>
	<!---------------------------------------------------->
	
	<script src="../assets/js/script.js"></script>
	<script type="text/javascript">
		
		'use strict';
		
		jQuery(document).ready(function() {
            
			var doctorID = getAllUrlParams().id;
            
			fetch('/people/' + doctorID)
				.then(response => response.json())
				.then(function(doctorData){
					fillDoctorData(doctorData);
			});
			
			
         // location services, with typology and overview are fetched.
			// data is groupped by typology, and each services fills the corresponding area   
			fetch('/people/' + doctorID + '/services')
				.then(response => response.json())
				.then(function(serviceList){
					//typologies of services operated in this location
					let typoList = serviceList
												.map(serv => serv.typology) //extract only typology
												.filter((elem, index, self) => index == self.indexOf(elem)) //delete duplicates
												.map(type => type.replace(/\s+/g, '')); //delete spaces

					//each 'typology area' is maped to fill it with the correct 'service overview'
					typoList.map(addOverview, serviceList); //serviceList is passed via this attribute
			});
			
			function fillDoctorData(doctor){
				document.title = doctor[0].name + ' ' + doctor[0].surname;
				$('#breadcrumbName').text(doctor[0].name + ' ' + doctor[0].surname);
				$('#docName').text(doctor[0].name + ' ' + doctor[0].surname);
				$('#docImg').attr("src", doctor[0].picture);
				$('#docProfession').text(doctor[0].profession);
				$('#docProfession').after(`<p>${doctor[0].bio}</p>`);
				$('#doctorQuote').text(doctor[0].quote);
			}
            
			function addOverview(serviceType){
				let serviceList = this; //service list passed via 'this' argumentß
				serviceList.forEach(function(service){
					//spaces are deleted from input service typology in order to match with div Id, which has no spaces
					var serviceName_NoSpaces = service.typology.replace(/\s+/g, ''); //delete spaces
					if(serviceName_NoSpaces === serviceType){
						$('#' + serviceType).removeClass('d-none');
						$('#' + serviceType + 'List').append(`
							<li class="my-2 serviceOverview">
								<a class="d-block" data-toggle="collapse" href="#collapseService_${service.id}" role="button" aria-expanded="false">
									${service.name}
								</a>
								<div class="collapse" id="collapseService_${service.id}">
									<div class="p-1">
										${service.overview.split(".")[0] + "." + service.overview.split(".")[1] + "..."}
										<a href="serviceDetail.html?id=${service.id}" class="button redirect-btn ml-auto mr-3 my-1">Read More...</a>
									</div>
								</div>
							</li>
						`);
					}
				});
			};         
		});
	</script>
</body>
</html>
