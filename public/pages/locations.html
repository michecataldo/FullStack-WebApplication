<html>
<head>
	<title>Locations</title>
	<link href = "../assets/img/logo.png" rel="icon">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
	<!-- Bootstrap and JQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">

	<!--Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Fredericka+the+Great" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

	<!--CUSTOM CSS -->
	<link rel="stylesheet" type="text/css" href="../assets/css/style.css">
</head>

<body>
<!------------------ HEADER ------------------>
	<header class="mb-4">
		<div class="container-fluid fixed-top" style="padding:0; background-color:#FEFAFA">
			<div class="col text-center" id="fadeout">
				<img class="img-fluid" src="../assets/img/logo2.png" style="max-height:120px" />
			</div>
			<nav class="navbar navbar-expand-lg" style="margin:0">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="margin:auto">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
					<ul class="navbar-nav" style="margin:auto">
						<li class="nav-item"><a class="nav-link navigation-text" href="../index.html">Home</a></li>
						<li class="nav-item"><a class="nav-link navigation-text" href="whoweare.html">Who We Are</a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Our offer
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="services.html">Services</a>
								<a class="dropdown-item navigation-text" href="people.html">People</a>
								<a class="dropdown-item navigation-text" href="locations.html">Locations</a>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle navigation-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								News &amp; Events
							</a>
							<div class="dropdown-menu text-center" aria-labelledby="navbarDropdown">
								<a class="dropdown-item navigation-text" href="#">News</a>
								<a class="dropdown-item navigation-text" href="#">Events</a>
							</div>
						</li>
						<li class="nav-item"><a class="nav-link navigation-text" href="contactus.html">Contacts</a></li>
					</ul>
				</div>
			</nav>
		</div>
	</header>

	<div class="container-fluid" id="content-wrapper">
		<!----- CONTENT ---->

		<!-- PRESENTATION IMAGE -->
		<div class="row">
			<div class ="col-lg-8 col-xxs-12 m-auto text-center">
				<img src="../assets/img/presentation_img/locations.jpg" class="presentation-image" alt="Presentation Image">
				<div class="opaque_line_text">
					Our Locations
				</div>
			</div>
		</div>

		<!-- PRESENTATION TEXT -->
		<div class="row">
			<div class="col-lg-10 m-auto">
				<p>Our centre is a health care institution providing patient treatment with specialized medical and nursing staff and medical equipment. Specialised locations include trauma centres, rehabilitation hospitals, children's hospitals, and structures for dealing with specific medical needs such as psychiatric treatment and certain disease categories. Specialised centres can help reduce health care costs compared to general hospitals.</p>
				<p>A teaching centre combines assistance to people with teaching to new volounteers, students and nurses. The medical facility smaller than a hospital is generally called a clinic. Hospitals have a range of departments and specialist units such as cardiology. Some hospitals have outpatient departments and some have chronic treatment units. Common support units include a pharmacy, pathology, and radiology.</p>
				<p>Centres are usually funded by the public sector, health organisations (for profit or nonprofit), health insurance companies, or charities, including direct charitable donations. Historically, hospitals were often founded and funded by religious orders, or by charitable individuals and leaders.</p>
			</div>
		</div>

		<hr class="division_line">

		<!-- FILTERING BUTTONS  -->
		<div class="d-flex flex-row justify-content-around flex-wrap w-75 m-auto" id="buttonContainer">
			<button class="filter_button m-3 p-2" id="allBtn" onClick="showAll()">All Regions</button>
			<!--filled with other buttons-->
		</div>

		<!-- LOCATION CARDS -->
		<div class="col-lg-10 mx-auto mt-3 p-0" id="onClickReturn">
			<div class="d-flex flex-row flex-wrap justify-content-around" id="card_container">
				<!---filled with cards--->
			</div>
		</div>
	</div>
	
	<!------------------ FOOTER ------------------>
	
	<footer>
		<div class="footer_content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-10 col-md-6 d-flex flex-column flex-md-row text-center align-items-center nav-itemfooter mx-auto mb-3" >
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="../index.html">Home</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Privacy</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">Volunteer</a>
						<a style="color: white; padding-left: 10px; padding-right: 10px" href="#">FAQ</a>
						<a style="color: white; border-right: none; padding-left: 10px; padding-right: 10px" href="#">Help Us!</a>
					</div>
					<div class="col-10 col-md-4 mx-auto mb-3">
						<div class ="social">
							<div class="a2a_kit a2a_kit_size_32 a2a_default_style d-flex justify-content-center" style="padding-top: 10px">
								<a class="a2a_button_facebook" href="https://www.facebook.com"></a>
								<a class="a2a_button_twitter" href="https://www.twitter.com" style="margin-left: 10px"></a>
								<a class="a2a_button_google_plus" href="https://www.plus.google.com" style="margin-left: 10px"></a>
								<a class="a2a_button_email" style="margin-left: 10px"></a>
							</div>
							<script async src="https://static.addtoany.com/menu/page.js"></script>
						</div>
					</div>
					<div class=" col-10 col-md-2 mx-auto">
						<button href="#" type="button" class="btn donate-btn d-block mx-auto mb-3">
							donate
						</button>
					</div>
				</div>
			</div>
		</div>
	</footer>
	
	<!---------------------------------------------------->
	<!------------------ DYNAMIC SCRIPT ------------------>
	<!---------------------------------------------------->
	
	<script src="../assets/js/script.js"></script>
	<script type="text/javascript">
		
		'use strict';
		
		jQuery(document).ready(function() {
			
			fetch('/locations')
				.then(response => response.json())
				.then(function(locations){
					var regionList = locations
												.map(loc => loc.region) //extract only region
												.filter((elem, index, self) => index == self.indexOf(elem)) //delete duplicates
					addFilterButton(regionList);
					locations.map(addLocationCard);
				})
			
			
			function addLocationCard(location){
				$('#card_container').append(`
					<div class="location-card m-3 pb-md-2 text-center">
						<span class="sr-only">${location.region}</span>
						<a href="locationDetail.html?id=${location.id}">
							<div class="card-link">
								<div class="card-img-container">
									<img class="img-fluid card-img" src="${location.picture}cover.jpg" alt="location_image">
									<div class=lens_img></div>
								</div>
								<h3 class="mt-2">${location.name}</h3>
							</div>
						</a>
						<div class="card-info">
							<h6 style="color: rgb(226,162,30);
										 font-family: 'Montserrat',sans-serif">
								${location.city} <br> ${location.address}
							</h6>
							<hr class="division_line_curvy">
							<a href="tel:+39${location.phone}" class="d-block"><strong>${location.phone}</strong></a>
							<a href="mailto:${location.mail}" class="d-block">${location.mail}</a>
						</div>
						<a class="btn d-md-none btn-sm btn-outline-secondary float-right my-2" href="locationDetail.html?id=${location.id}">See More...</a>
					</div>	
				`);
			};
			
			function addFilterButton(regionList){
				regionList.sort();
				regionList.forEach(function(elem){
					$('#buttonContainer').append(`
						<button class="filter_button m-3 p-2" id="${elem}" onClick="filterCards(this.id)">${elem}</button>
					`);
				});
			};			
		});
		
		
		/**Filter is done by the match between button name, and a string, placed in a 'sr-only' span.
		 * If the button Name appears in the String, card is showed; in the other case, it's hided.
		 */
		function filterCards(btnName){
			$('.location-card').each(function(){
				let card = this; //jQuery object containing the single doctor-card's <div>
				var region = $(card).find('span.sr-only').text();
				if(region === btnName)
					$(card).show();
				else
					$(card).hide();
			});
			
			scrollOnClick();
		};
		
		
	</script>
</body>
</html>
